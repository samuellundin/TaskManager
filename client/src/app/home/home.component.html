<div class="col-lg-8">
  <h1 *ngIf="currentUser" class="display-4">Welcome {{currentUser.firstName}} {{currentUser.lastName}}!</h1>
  <h1 *ngIf="!currentUser" class="display-4">Welcome!</h1>
  <p class="lead">Here, you can view your tasks based on category. Click on each task to be taken to the task view,
    where you can edit or complete any existing task. Enjoy!</p>
</div>

<div *ngIf="currentUser">
  <div class="d-flex mb-2">
    <h2 class="mr-auto p-2">Tasks</h2>
    <select class="form-control p-2 col-5" [ngModel]="selectedCategory" (ngModelChange)="onChangeCategory($event)"
            name="category">
      <option style="height: 50px;" [ngValue]="0">All Categories</option>
      <option [ngValue]="category.categoryId" *ngFor="let category of categories">{{category.title}}</option>
    </select>
  </div>

  <hr>
  <table class="table table-bordered">
    <thead>
    <tr>
      <th scope="col">Title</th>
      <th scope="col">Description</th>
      <th scope="col">Start Date</th>
      <th scope="col">End Date</th>
      <th scope="col" class="text-center">Tools</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let task of tasksByCategory">
      <td>{{task.title}}</td>
      <td>{{task.description}}</td>
      <td>{{task.startDate | date:'yyyy-MM-dd'}}</td>
      <td>{{task.endDate | date:'yyyy-MM-dd'}}</td>
      <td class="text-center">
        <button type="button" class="btn btn-light">
          <i class="fa fa-pencil"></i>
        </button>
        <button type="button" class="btn btn-danger" data-toggle="modal" data-target="#deleteModal"
                (click)="deleteModal(task)">
          <i class="fa fa-times"></i>
        </button>
      </td>
    </tr>
    </tbody>
  </table>

  <!--Modal -->
  <div class="modal fade" id="deleteModal" tabindex="-1" role="dialog" aria-labelledby="modalTitle" aria-hidden="true">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title" id="modalTitle">Are you sure that you want to delete this task?</h5>
          <button type="button" class="close" data-dismiss="modal" aria-label="Close">
            <span aria-hidden="true">&times;</span>
          </button>
        </div>
        <div class="modal-body">
          <label class="font-weight-bold">Title: </label> {{selectedTask.title}}<br>
          <label class="font-weight-bold">Description: </label><br>
          {{selectedTask.description}}
        </div>
        <div class="modal-footer">
          <button type="button" class="btn btn-secondary" data-dismiss="modal">Cancel</button>
          <button type="button" class="btn btn-danger" data-dismiss="modal" (click)="deleteTask()">Delete</button>
        </div>
      </div>
    </div>
  </div>
</div>
<!--

<div class="container" *ngIf="bool">
    <label for="selectCategoryDiv">Choose task category</label>
    <div class="input-group mb-4" id="selectCategoryDiv">
      <select class="form-control col-lg-4" id="selectCategory" [ngModel]="selectedCategory" (ngModelChange)="onChangeCategory($event)" name="category">
        <option [ngValue]="category.categoryId" *ngFor="let category of categoriesByUser">{{category.title}}</option>
      </select>
      {{selectedCategory | json}}
    </div>
</div>

<div class="container" *ngIf="bool">
<div class="list-group">
  <ul class="col-lg-8">
    <li href="#myModal" class="list-group-item col-md-4 active odd">Task</li>
    <li class="list-group-item col-md-4 active odd">Start date</li>
    <li class="list-group-item col-md-4 active even">End date</li>
    <div class="parent" *ngFor="let task of tasks">
      <button type="button" data-toggle="modal" (click)="toggle($event)" id="1" data-target="#editModal" class="list-group-item list-group-item-action col-md-4 control odd">{{task.title}}</button>
      <button type="button" data-toggle="modal" data-target="#editModal" class="list-group-item list-group-item-action col-md-4 target odd">{{task.startDate | date:'yyyy-MM-dd HH:mm:ss'}}</button>
      <button type="button" data-toggle="modal" data-target="#editModal" class="list-group-item list-group-item-action col-md-4 target even">{{task.endDate | date:'yyyy-MM-dd HH:mm:ss'}}</button>
      <span class="badge badge-inverse" data-toggle="modal" data-target="#editModal">Edit</span>
    </div>
  </ul>
</div>
</div>



<div class="tableContainer">
  <table>
    <thead>
    <tr>
      <th>{{categoriesByUser}}</th>
    </tr>
    </thead>
    <tbody>
    <tr>
      <th>Task</th>
      <th>Start</th>
      <th>End</th>
    </tr>
    <tr>
      <td>Work</td>
      <td>08:00</td>
      <td>16:00</td>
    </tr>
    <tr>
      <td>Supermarket</td>
      <td>16:30</td>
      <td>17.30</td>
    </tr>
    <tr>
      <td>Afterwork</td>
      <td>20:00</td>
      <td>01:30</td>
    </tr>
    </tbody>
  </table>
</div>-->
